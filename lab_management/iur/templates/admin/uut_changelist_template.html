{% extends 'admin/change_list.html' %}

{% block extrahead %}
{{ block.super }}
<!-- CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<!-- jQuery and JS bundle w/ Popper.js -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<style>
.checkbox-menu li label {
    display: block;
    padding: 3px 10px;
    clear: both;
    font-weight: normal;
    line-height: 1.42857143;
    color: #333;
    white-space: nowrap;
    margin:0;
    transition: background-color .4s ease;
}
.checkbox-menu li input {
    margin: 0px 5px;
    top: 2px;
    position: relative;
}

.checkbox-menu li.active label {
    background-color: #c4dce8;
    font-weight:bold;
}

.checkbox-menu li label:hover,
.checkbox-menu li label:focus {
    background-color: #f5f5f5;
}

.checkbox-menu li.active label:hover,
.checkbox-menu li.active label:focus {
    background-color: #417690cc;
}
.dropdowndata{
    max-height: 300px;
    overflow-y: scroll;
}
</style>
{% endblock %}





{% block search %}
{{ block.super }}


<form id='changelist-adv-search' method='get'>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#advsearch-modal">
        Advance Filter
    </button>

    <!-- Modal -->
    <div class="modal fade" id="advsearch-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Advance Filter</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            {% comment %} add block here {% endcomment %}
            {% block dropdownfilter %}

            {% for dlist in dropdown %}
            <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" 
                    id="dropdown{{ dlist.buttonName }}" data-toggle="dropdown" 
                    aria-haspopup="true" aria-expanded="true">
                    {{ dlist.buttonName }}
                    
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu checkbox-menu allow-focus" aria-labelledby="dropdownMenu1">
                    <input type="text" list="" class="searchthenshow"  placeholder="Search {{ dlist.buttonName }}">
                    <div class="dropdown-divider"></div>
                    <div class="dropdowndata">
                    {% if dlist.dataList %}
                        {% for id,data in dlist.dataList %}
                            <li value="{{ id }}">
                            <label>
                            <input type="checkbox" name="select{{ dlist.buttonName }}" value="{{ id }}"> 
                                {{ data }}
                            </label>
                            </li>
                        {% endfor %}
                    {% endif %}
                    </div>
            </ul>
            </div>
            <hr>
            {% endfor %}
            {% endblock %}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {% comment %} {% csrf_token %} {% endcomment %}
                    <button type="submit" name='search_adv' value='search_adv' class="btn btn-primary">Search</button>
                </div>
                </div>
            </div>
            </div>
        </form>
        <hr>

<script>
$(".checkbox-menu").on("change", "input[type='checkbox']", function() {
   $(this).closest("li").toggleClass("active", this.checked);
});

$(document).on('click', '.allow-focus', function (e) {
  e.stopPropagation();
});

</script>
{% endblock %}


